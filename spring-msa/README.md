
### MSA 구축 이유
1. 복잡성이 증가했다.
   - 오늘날 어플리케이션은 사내뿐만아니라 우리의 고객, 외부의 서비스 수요자에게도 다양한 서비스와 데이터를 제공해야한다.
2. 고객인 더 빠른 전달을 원한다.
   - 고객은 더이상 느린 배포를 원하지 않는다. 몇 주, 며칠 이내에 배포되길 원하며 이러한 빠른 배포를 위해서는 제품 기능별로 분리를 해야한다.
3. 고객은 안정적인 성능과 확장성을 요구한다.
   - 어플리케이션의 트랜잭션양을 얼마나 처리해야하는지 예측하기가 어렵다. 때문에 어플리케이션의 트랜재션양에 따라서 신속하게 서버를 확장하고 축소할 수 있어야 한다.
4. 고객은 애플리케이션을 언제든 사용할 수 있기를 기대한다.
   - 애플리케이션의 장애가 일어나도 회복성이 높으며 하나의 어플리케이션 오류 때문에 전체 서비스가 영향으로 확대되기를 고객은 기대하지 않는다.

> 위와같은 이유로 서비스를 더 작은 서비스로 분리하고, 지속적으로 통합 및 배포하며 안전정이 서비스 구축을 위한 수요가 계속해서 증가해왔다.

##### 서비스를 분리하며 얻게되는 이득
1. 유연성
   - 분리된 서비스는 새로운 기능을 신속하게 제공하도록 구성하고 재배치가 가능하다.
   - 다른 것과 함께 작동하는 코드가 적을수록 코드 변경에 복잡성도 낮아지기 때문에 코드의 테스트 및 배포 시간이 줄어든다.
2. 회복성
   - 분리된 서비스란 한 부분의 서비스 장애가 전체 서비스 장애로 이루어지지 않는 것을 의미한다.
   - 전체 장애를 억제함과 동시에 복잡도가 모놀리스 아키텍처보다 낮기 때문에 회복성이 높다.
3. 확장성
   - 서비스가 분리되어 있지 않으면 스케일다운을 진행하기가 어렵다.
   - 하지만 분리된 서비스의 경우 스케일다운을 하기 쉽기 때문에 확장성이 높다.

> 작고(small), 단순하고(simple), 분리된(decoupled) 서비스 = 확장 가능하고(scalable), 회복적이며(resilient) 유연한(flexible) 애플리케이션

### MSA 작성 지침
- 적정 규모 (right-sized)
  - 분리된 서비스가 너무 많은 책임을 지지 않도록 적절한 마이크로서비스 크기를 유지해야한다.
  - 적절한 크기의 서비스를 유지하면 신속히 변경할 수 있고 전체 어플리케이션에 대한 위험을 줄일 수 있다.
  - 즉 서비스가 한 가지 책임 영역에 집중되도록 하려면 어떻게 해야할지 고민해야한다.
- 위치 투명성 (location transparent)
  - MSA에서는 다수의 서비스 인스턴스가 빠르게 시작되고 종료될 수 있다.
  - 클라이언트에 영향을 주지 않고 서비스 인스턴스를 추가하고 삭제하려면 물리적 위치를 어떻게 관리할지를 고민해야 한다.
- 회복성 (resilient)
  - "빠른 실패" 방식을 적용하여 마이크로서비스 서비자와 애플맄에션의 전반적인 무결성을 보호해야한다.
- 반복성 (repeatable)
  - 서비스의 새 인스턴스가 시작할 때 운영 환경의 다른 서비스와 동일한 구성과 코드베이스를 보장해야한다.
- 확장성 (scalable)
  - 마이크로서비스를 적절히 확장할 수 있도록 통신 방식을 구축해야한다.